---
layout: post
title: "Nginx"
description: ""
category: 
tags: []
---
{% include JB/setup %}

以下是译文：

在之前的文章里，我们讨论了我们如何测试LinkedIn的移动服务集群，包括我们的 Node.js 移动端服务器。今天，我们想给你们说说我们是如何让这个服务器快速运行的。这里就是我们在 Node.js 上的十大性能提升秘籍：

1. 避免同步的代码

Node.js 从一开始的设计就是单线程的。要让一个线程处理很多并发请求，你就永远不要让这个线程在阻塞、同步或运行时间很长的操作中等待。Node.js的一个超凡脱俗的特性就是它从上到下都是设计和实现为异步模式。这使它对事件驱动的应用是绝配。

不幸的是，在Node.js里进行同步/阻塞式的调用还是有可能的。例如，很多文件系统操作都提供了异步和同步版本，例如writeFile和writeFileSync。即便你在自己的代码里避免了同步方法，却有可能漫不经心地引入了一个外部库，而在该库中使用了阻塞式调用。当你这么做了之后，它对性能的影响是巨大的。

我们最初的日志实现就偶然性地引入了一个写入磁盘的同步调用。在我们进行性能测试之前，没人注意到它的存在。当我们在一台开发机上对比单个Node.js服务器性能的时候，这一个同步调用导致性能从每秒处理1000个请求下降到几十个！